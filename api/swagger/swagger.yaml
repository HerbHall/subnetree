basePath: /api/v1
definitions:
  github_com_HerbHall_subnetree_internal_services.NetworkInterface:
    properties:
      ip_address:
        example: 192.168.1.100
        type: string
      mac:
        example: 00:1a:2b:3c:4d:5e
        type: string
      name:
        example: eth0
        type: string
      status:
        description: '"up" or "down"'
        example: up
        type: string
      subnet:
        example: 192.168.1.0/24
        type: string
    type: object
  github_com_HerbHall_subnetree_pkg_analytics.AlertGroup:
    properties:
      alert_count:
        type: integer
      created_at:
        type: string
      description:
        type: string
      device_ids:
        items:
          type: string
        type: array
      id:
        type: string
      root_cause:
        description: Device ID identified as root
        type: string
    type: object
  github_com_HerbHall_subnetree_pkg_analytics.Anomaly:
    properties:
      description:
        type: string
      detected_at:
        type: string
      deviation:
        description: How far from baseline (sigma)
        type: number
      device_id:
        type: string
      expected:
        description: Baseline expected value
        type: number
      id:
        type: string
      metric_name:
        type: string
      resolved_at:
        type: string
      severity:
        description: '"info", "warning", "critical"'
        type: string
      type:
        description: '"zscore", "cusum", "trend"'
        type: string
      value:
        description: Observed value
        type: number
    type: object
  github_com_HerbHall_subnetree_pkg_analytics.Baseline:
    properties:
      algorithm:
        description: '"ewma", "holt_winters"'
        type: string
      device_id:
        type: string
      mean:
        type: number
      metric_name:
        type: string
      samples:
        type: integer
      stable:
        description: true after learning period
        type: boolean
      std_dev:
        type: number
      updated_at:
        type: string
    type: object
  github_com_HerbHall_subnetree_pkg_analytics.Forecast:
    properties:
      confidence:
        description: 0.0-1.0
        type: number
      current_value:
        type: number
      device_id:
        type: string
      generated_at:
        type: string
      metric_name:
        type: string
      predicted_value:
        type: number
      slope:
        description: Rate of change per hour
        type: number
      threshold:
        type: number
      time_to_threshold:
        type: integer
    type: object
  github_com_HerbHall_subnetree_pkg_analytics.NLQueryRequest:
    properties:
      query:
        type: string
    type: object
  github_com_HerbHall_subnetree_pkg_analytics.NLQueryResponse:
    properties:
      answer:
        type: string
      model:
        type: string
      query:
        type: string
      structured: {}
    type: object
  github_com_HerbHall_subnetree_pkg_models.APIProblem:
    properties:
      detail:
        example: invalid request body
        type: string
      instance:
        example: /api/v1/auth/login
        type: string
      status:
        example: 400
        type: integer
      title:
        example: Bad Request
        type: string
      type:
        example: https://subnetree.com/problems/bad-request
        type: string
    type: object
  github_com_HerbHall_subnetree_pkg_models.AgentInfo:
    properties:
      device_id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      enrolled_at:
        example: "2026-01-10T08:00:00Z"
        type: string
      id:
        example: agent-550e8400
        type: string
      last_check_in:
        example: "2026-01-15T10:30:00Z"
        type: string
      platform:
        example: linux/amd64
        type: string
      status:
        example: connected
        type: string
      version:
        example: 0.1.0
        type: string
    type: object
  github_com_HerbHall_subnetree_pkg_models.Device:
    properties:
      agent_id:
        example: agent-01
        type: string
      category:
        example: production
        type: string
      custom_fields:
        additionalProperties:
          type: string
        type: object
      device_type:
        allOf:
        - $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.DeviceType'
        example: server
      discovery_method:
        allOf:
        - $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.DiscoveryMethod'
        example: icmp
      first_seen:
        example: "2026-01-10T08:00:00Z"
        type: string
      hostname:
        example: web-server-01
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      ip_addresses:
        items:
          type: string
        type: array
      last_seen:
        example: "2026-01-15T10:30:00Z"
        type: string
      location:
        example: Rack A3, U12
        type: string
      mac_address:
        example: 00:1a:2b:3c:4d:5e
        type: string
      manufacturer:
        example: Dell Inc.
        type: string
      notes:
        example: Production web server
        type: string
      os:
        example: Ubuntu 22.04
        type: string
      owner:
        example: platform-team
        type: string
      primary_role:
        example: web-server
        type: string
      status:
        allOf:
        - $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.DeviceStatus'
        example: online
      tags:
        items:
          type: string
        type: array
    type: object
  github_com_HerbHall_subnetree_pkg_models.DeviceStatus:
    enum:
    - online
    - offline
    - degraded
    - unknown
    type: string
    x-enum-varnames:
    - DeviceStatusOnline
    - DeviceStatusOffline
    - DeviceStatusDegraded
    - DeviceStatusUnknown
  github_com_HerbHall_subnetree_pkg_models.DeviceType:
    enum:
    - server
    - desktop
    - laptop
    - mobile
    - router
    - switch
    - printer
    - iot
    - access_point
    - firewall
    - nas
    - phone
    - tablet
    - camera
    - unknown
    type: string
    x-enum-varnames:
    - DeviceTypeServer
    - DeviceTypeDesktop
    - DeviceTypeLaptop
    - DeviceTypeMobile
    - DeviceTypeRouter
    - DeviceTypeSwitch
    - DeviceTypePrinter
    - DeviceTypeIoT
    - DeviceTypeAccessPoint
    - DeviceTypeFirewall
    - DeviceTypeNAS
    - DeviceTypePhone
    - DeviceTypeTablet
    - DeviceTypeCamera
    - DeviceTypeUnknown
  github_com_HerbHall_subnetree_pkg_models.DiscoveryMethod:
    enum:
    - agent
    - icmp
    - arp
    - snmp
    - mdns
    - upnp
    - mqtt
    - manual
    type: string
    x-enum-varnames:
    - DiscoveryAgent
    - DiscoveryICMP
    - DiscoveryARP
    - DiscoverySNMP
    - DiscoverymDNS
    - DiscoveryUPnP
    - DiscoveryMQTT
    - DiscoveryManual
  github_com_HerbHall_subnetree_pkg_models.ScanResult:
    properties:
      devices:
        items:
          $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.Device'
        type: array
      ended_at:
        example: "2026-01-15T10:32:15Z"
        type: string
      id:
        example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        type: string
      online:
        example: 8
        type: integer
      started_at:
        example: "2026-01-15T10:30:00Z"
        type: string
      status:
        example: completed
        type: string
      subnet:
        example: 192.168.1.0/24
        type: string
      total:
        example: 12
        type: integer
    type: object
  github_com_HerbHall_subnetree_pkg_roles.MonitorStatus:
    properties:
      checked_at:
        type: string
      device_id:
        type: string
      healthy:
        type: boolean
      message:
        type: string
    type: object
  internal_auth.LoginRequest:
    properties:
      password:
        example: securepassword123
        type: string
      username:
        example: admin
        type: string
    type: object
  internal_auth.LogoutRequest:
    properties:
      refresh_token:
        example: dGhpcyBpcyBhIHJlZnJl...
        type: string
    type: object
  internal_auth.RefreshRequest:
    properties:
      refresh_token:
        example: dGhpcyBpcyBhIHJlZnJl...
        type: string
    type: object
  internal_auth.Role:
    enum:
    - admin
    - operator
    - viewer
    type: string
    x-enum-varnames:
    - RoleAdmin
    - RoleOperator
    - RoleViewer
  internal_auth.SetupRequest:
    properties:
      email:
        example: admin@example.com
        type: string
      password:
        example: securepassword123
        type: string
      username:
        example: admin
        type: string
    type: object
  internal_auth.TokenPair:
    properties:
      access_token:
        example: eyJhbGciOiJIUzI1NiIs...
        type: string
      expires_in:
        description: Access token TTL in seconds
        example: 900
        type: integer
      refresh_token:
        example: dGhpcyBpcyBhIHJlZnJl...
        type: string
    type: object
  internal_auth.UpdateUserRequest:
    properties:
      disabled:
        example: false
        type: boolean
      email:
        example: user@example.com
        type: string
      role:
        example: operator
        type: string
    type: object
  internal_auth.User:
    properties:
      auth_provider:
        example: local
        type: string
      created_at:
        example: "2026-01-10T08:00:00Z"
        type: string
      disabled:
        example: false
        type: boolean
      email:
        example: admin@example.com
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      last_login:
        example: "2026-01-15T10:30:00Z"
        type: string
      locked_until:
        type: string
      oidc_subject:
        type: string
      role:
        allOf:
        - $ref: '#/definitions/internal_auth.Role'
        example: admin
      username:
        example: admin
        type: string
    type: object
  internal_dispatch.enrollTokenRequest:
    properties:
      description:
        type: string
      expires_in:
        description: e.g. "24h", "7d"
        type: string
      max_uses:
        type: integer
    type: object
  internal_dispatch.enrollTokenResponse:
    properties:
      expires_at:
        type: string
      id:
        type: string
      max_uses:
        type: integer
      token:
        description: raw token (only returned once)
        type: string
    type: object
  internal_pulse.Alert:
    properties:
      check_id:
        type: string
      consecutive_failures:
        type: integer
      device_id:
        type: string
      id:
        type: string
      message:
        type: string
      resolved_at:
        type: string
      severity:
        type: string
      triggered_at:
        type: string
    type: object
  internal_pulse.Check:
    properties:
      check_type:
        type: string
      created_at:
        type: string
      device_id:
        type: string
      enabled:
        type: boolean
      id:
        type: string
      interval_seconds:
        type: integer
      target:
        type: string
      updated_at:
        type: string
    type: object
  internal_pulse.CheckResult:
    properties:
      check_id:
        type: string
      checked_at:
        type: string
      device_id:
        type: string
      error_message:
        type: string
      id:
        type: integer
      latency_ms:
        type: number
      packet_loss:
        type: number
      success:
        type: boolean
    type: object
  internal_recon.BulkUpdateRequest:
    properties:
      device_ids:
        items:
          type: string
        type: array
      updates:
        $ref: '#/definitions/internal_recon.UpdateDeviceParams'
    type: object
  internal_recon.BulkUpdateResponse:
    properties:
      updated:
        type: integer
    type: object
  internal_recon.CreateDeviceRequest:
    properties:
      device_type:
        type: string
      hostname:
        type: string
      ip_addresses:
        items:
          type: string
        type: array
      mac_address:
        type: string
      notes:
        type: string
      tags:
        items:
          type: string
        type: array
    type: object
  internal_recon.DeviceListResponse:
    properties:
      devices:
        items:
          $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.Device'
        type: array
      limit:
        type: integer
      offset:
        type: integer
      total:
        type: integer
    type: object
  internal_recon.DeviceScanEvent:
    properties:
      completed_at:
        type: string
      devices_found:
        type: integer
      id:
        type: string
      started_at:
        type: string
      status:
        type: string
      target_cidr:
        type: string
    type: object
  internal_recon.DeviceStatusEvent:
    properties:
      device_id:
        type: string
      id:
        type: string
      status:
        type: string
      timestamp:
        type: string
    type: object
  internal_recon.InventorySummary:
    properties:
      by_category:
        additionalProperties:
          type: integer
        type: object
      by_type:
        additionalProperties:
          type: integer
        type: object
      offline_count:
        type: integer
      online_count:
        type: integer
      stale_count:
        type: integer
      total_devices:
        type: integer
    type: object
  internal_recon.ScanRequest:
    properties:
      subnet:
        example: 192.168.1.0/24
        type: string
    type: object
  internal_recon.TopologyEdge:
    properties:
      id:
        example: link-001
        type: string
      link_type:
        example: ethernet
        type: string
      source:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      speed:
        example: 1000
        type: integer
      target:
        example: 660f9500-f30c-52e5-b827-557766551111
        type: string
    type: object
  internal_recon.TopologyGraph:
    properties:
      edges:
        items:
          $ref: '#/definitions/internal_recon.TopologyEdge'
        type: array
      nodes:
        items:
          $ref: '#/definitions/internal_recon.TopologyNode'
        type: array
    type: object
  internal_recon.TopologyNode:
    properties:
      device_type:
        allOf:
        - $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.DeviceType'
        example: server
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      ip_addresses:
        items:
          type: string
        type: array
      label:
        example: web-server-01
        type: string
      mac_address:
        example: 00:1a:2b:3c:4d:5e
        type: string
      manufacturer:
        example: Dell Inc.
        type: string
      status:
        allOf:
        - $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.DeviceStatus'
        example: online
    type: object
  internal_recon.UpdateDeviceParams:
    properties:
      category:
        type: string
      custom_fields:
        additionalProperties:
          type: string
        type: object
      device_type:
        type: string
      location:
        type: string
      notes:
        type: string
      owner:
        type: string
      primary_role:
        type: string
      tags:
        items:
          type: string
        type: array
    type: object
  internal_server.HealthResponse:
    properties:
      service:
        example: subnetree
        type: string
      status:
        example: ok
        type: string
      version:
        additionalProperties:
          type: string
        type: object
    type: object
  internal_server.PluginResponse:
    properties:
      description:
        example: Network discovery and scanning
        type: string
      name:
        example: recon
        type: string
      version:
        example: 0.1.0
        type: string
    type: object
  internal_settings.ActiveThemeRequest:
    description: Request body for setting the active theme.
    properties:
      theme_id:
        example: builtin-forest-dark
        type: string
    type: object
  internal_settings.ActiveThemeResponse:
    description: Response containing the active theme ID.
    properties:
      theme_id:
        example: builtin-forest-dark
        type: string
    type: object
  internal_settings.ScanInterfaceRequest:
    description: Request body for setting the network scan interface.
    properties:
      interface_name:
        example: eth0
        type: string
    type: object
  internal_settings.ScanInterfaceResponse:
    description: Response containing the configured scan interface.
    properties:
      interface_name:
        example: eth0
        type: string
    type: object
  internal_settings.SettingsProblemDetail:
    description: RFC 7807 Problem Details error response.
    properties:
      detail:
        example: 'interface not found: eth99'
        type: string
      status:
        example: 400
        type: integer
      title:
        example: Bad Request
        type: string
      type:
        example: https://subnetree.com/problems/settings-error
        type: string
    type: object
  internal_settings.ThemeDefinition:
    description: A theme with metadata, layer declarations, and CSS token overrides.
    properties:
      base_mode:
        type: string
      built_in:
        type: boolean
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      layers:
        items:
          $ref: '#/definitions/internal_settings.ThemeLayer'
        type: array
      name:
        type: string
      tokens:
        $ref: '#/definitions/internal_settings.ThemeTokens'
      updated_at:
        type: string
      version:
        type: integer
    type: object
  internal_settings.ThemeLayer:
    enum:
    - colors
    - typography
    - shape
    - effects
    type: string
    x-enum-varnames:
    - LayerColors
    - LayerTypography
    - LayerShape
    - LayerEffects
  internal_settings.ThemeTokens:
    description: Customizable CSS design token overrides grouped by UI category.
    properties:
      backgrounds:
        additionalProperties:
          type: string
        type: object
      borders:
        additionalProperties:
          type: string
        type: object
      buttons:
        additionalProperties:
          type: string
        type: object
      charts:
        additionalProperties:
          type: string
        type: object
      effects:
        additionalProperties:
          type: string
        type: object
      inputs:
        additionalProperties:
          type: string
        type: object
      sidebar:
        additionalProperties:
          type: string
        type: object
      spacing:
        additionalProperties:
          type: string
        type: object
      status:
        additionalProperties:
          type: string
        type: object
      text:
        additionalProperties:
          type: string
        type: object
      typography:
        additionalProperties:
          type: string
        type: object
    type: object
info:
  contact: {}
  description: Network monitoring and management platform API.
  title: SubNetree API
  version: 0.1.0
paths:
  /auth/login:
    post:
      consumes:
      - application/json
      description: Authenticate with username and password to receive a JWT token
        pair.
      parameters:
      - description: Login credentials
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_auth.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_auth.TokenPair'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      summary: Login
      tags:
      - auth
  /auth/logout:
    post:
      consumes:
      - application/json
      description: Revoke a refresh token to end a session.
      parameters:
      - description: Refresh token to revoke
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_auth.LogoutRequest'
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      summary: Logout
      tags:
      - auth
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: Exchange a valid refresh token for a new token pair (token rotation).
      parameters:
      - description: Refresh token
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_auth.RefreshRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_auth.TokenPair'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      summary: Refresh tokens
      tags:
      - auth
  /auth/setup:
    post:
      consumes:
      - application/json
      description: Create the first admin account. Only works when no users exist.
      parameters:
      - description: Admin account details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_auth.SetupRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/internal_auth.User'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      summary: Initial setup
      tags:
      - auth
  /dispatch/agents:
    get:
      description: Returns all registered Scout agents.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.AgentInfo'
            type: array
      security:
      - BearerAuth: []
      summary: List agents
      tags:
      - dispatch
  /dispatch/agents/{id}:
    delete:
      description: Removes a Scout agent by ID.
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Delete agent
      tags:
      - dispatch
    get:
      description: Returns a single Scout agent by ID.
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.AgentInfo'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Get agent
      tags:
      - dispatch
  /dispatch/enroll:
    post:
      consumes:
      - application/json
      description: Creates a new enrollment token for agent registration.
      parameters:
      - description: Token parameters
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/internal_dispatch.enrollTokenRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/internal_dispatch.enrollTokenResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Create enrollment token
      tags:
      - dispatch
  /health:
    get:
      description: Returns service health status with version information.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_server.HealthResponse'
      summary: Health check
      tags:
      - system
  /insight/anomalies:
    get:
      description: Returns all detected anomalies across all devices.
      parameters:
      - default: 50
        description: Maximum results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_analytics.Anomaly'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List anomalies
      tags:
      - insight
  /insight/anomalies/{device_id}:
    get:
      description: Returns anomalies for a specific device.
      parameters:
      - description: Device ID
        in: path
        name: device_id
        required: true
        type: string
      - default: 50
        description: Maximum results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_analytics.Anomaly'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Device anomalies
      tags:
      - insight
  /insight/baselines/{device_id}:
    get:
      description: Returns learned baselines for a specific device.
      parameters:
      - description: Device ID
        in: path
        name: device_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_analytics.Baseline'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Device baselines
      tags:
      - insight
  /insight/correlations:
    get:
      description: Returns active alert correlation groups.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_analytics.AlertGroup'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List correlations
      tags:
      - insight
  /insight/forecasts/{device_id}:
    get:
      description: Returns capacity forecasts for a specific device.
      parameters:
      - description: Device ID
        in: path
        name: device_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_analytics.Forecast'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Device forecasts
      tags:
      - insight
  /insight/query:
    post:
      consumes:
      - application/json
      description: Translate a natural language question into a structured query and
        return results.
      parameters:
      - description: Query
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_analytics.NLQueryRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_analytics.NLQueryResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties: true
            type: object
        "503":
          description: Service Unavailable
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Natural language query
      tags:
      - insight
  /plugins:
    get:
      description: Returns all registered plugins with their metadata.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_server.PluginResponse'
            type: array
      summary: List plugins
      tags:
      - system
  /pulse/alerts:
    get:
      description: Returns all active (unresolved) monitoring alerts.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_pulse.Alert'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List alerts
      tags:
      - pulse
  /pulse/alerts/{device_id}:
    get:
      description: Returns active (unresolved) alerts for a specific device.
      parameters:
      - description: Device ID
        in: path
        name: device_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_pulse.Alert'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Device alerts
      tags:
      - pulse
  /pulse/checks:
    get:
      description: Returns all enabled monitoring checks.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_pulse.Check'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List checks
      tags:
      - pulse
  /pulse/checks/{device_id}:
    get:
      description: Returns monitoring checks for a specific device.
      parameters:
      - description: Device ID
        in: path
        name: device_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_pulse.Check'
        "404":
          description: Not Found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Device checks
      tags:
      - pulse
  /pulse/results/{device_id}:
    get:
      description: Returns recent check results for a specific device.
      parameters:
      - description: Device ID
        in: path
        name: device_id
        required: true
        type: string
      - default: 100
        description: Maximum results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_pulse.CheckResult'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Device results
      tags:
      - pulse
  /pulse/status/{device_id}:
    get:
      description: Returns composite health status for a specific device, including
        latest check result and active alerts.
      parameters:
      - description: Device ID
        in: path
        name: device_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_roles.MonitorStatus'
        "500":
          description: Internal Server Error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Monitoring status
      tags:
      - pulse
  /recon/devices:
    get:
      description: Returns a paginated list of devices with optional status, type,
        category, and owner filters.
      parameters:
      - default: 50
        description: Max results
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset
        in: query
        name: offset
        type: integer
      - description: Filter by status
        in: query
        name: status
        type: string
      - description: Filter by device type
        in: query
        name: type
        type: string
      - description: Filter by category
        in: query
        name: category
        type: string
      - description: Filter by owner
        in: query
        name: owner
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_recon.DeviceListResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: List devices
      tags:
      - recon
    post:
      consumes:
      - application/json
      description: Manually creates a new device record.
      parameters:
      - description: Device to create
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_recon.CreateDeviceRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.Device'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Create device
      tags:
      - recon
  /recon/devices/{id}:
    delete:
      description: Permanently removes a device and its history.
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Delete device
      tags:
      - recon
    get:
      description: Returns a single device by its ID.
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.Device'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Get device
      tags:
      - recon
    put:
      consumes:
      - application/json
      description: Partially updates a device's notes, tags, custom fields, or device
        type.
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      - description: Fields to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_recon.UpdateDeviceParams'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.Device'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Update device
      tags:
      - recon
  /recon/devices/{id}/history:
    get:
      description: Returns the status change timeline for a device.
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      - default: 50
        description: Max results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_recon.DeviceStatusEvent'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Device status history
      tags:
      - recon
  /recon/devices/{id}/scans:
    get:
      description: Returns scans that discovered or updated the specified device.
      parameters:
      - description: Device ID
        in: path
        name: id
        required: true
        type: string
      - default: 50
        description: Max results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_recon.DeviceScanEvent'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Device scan history
      tags:
      - recon
  /recon/devices/bulk:
    patch:
      consumes:
      - application/json
      description: Applies the same partial update to multiple devices by ID.
      parameters:
      - description: Device IDs and fields to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_recon.BulkUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_recon.BulkUpdateResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Bulk update devices
      tags:
      - recon
  /recon/inventory/summary:
    get:
      description: Returns aggregate device inventory statistics including counts
        by status, category, and type.
      parameters:
      - default: 30
        description: Days since last seen to consider stale
        in: query
        name: stale_days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_recon.InventorySummary'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Inventory summary
      tags:
      - recon
  /recon/scan:
    post:
      consumes:
      - application/json
      description: Trigger a new network scan on the given subnet. Returns immediately
        with scan ID.
      parameters:
      - description: Subnet to scan
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_recon.ScanRequest'
      produces:
      - application/json
      responses:
        "202":
          description: Scan accepted
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.ScanResult'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Start scan
      tags:
      - recon
  /recon/scans:
    get:
      description: Returns a paginated list of scan results.
      parameters:
      - default: 50
        description: Max results
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.ScanResult'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: List scans
      tags:
      - recon
  /recon/scans/{id}:
    get:
      description: Returns a single scan result including discovered devices.
      parameters:
      - description: Scan ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.ScanResult'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Get scan
      tags:
      - recon
  /recon/topology:
    get:
      description: Returns the network topology as a graph of nodes and edges.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_recon.TopologyGraph'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Get topology
      tags:
      - recon
  /settings/interfaces:
    get:
      description: Get a list of all network interfaces available on the server.
      produces:
      - application/json
      responses:
        "200":
          description: List of interfaces
          schema:
            items:
              $ref: '#/definitions/github_com_HerbHall_subnetree_internal_services.NetworkInterface'
            type: array
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
      summary: List network interfaces
      tags:
      - settings
  /settings/scan-interface:
    get:
      description: Get the currently configured network interface for scanning.
      produces:
      - application/json
      responses:
        "200":
          description: Current scan interface
          schema:
            $ref: '#/definitions/internal_settings.ScanInterfaceResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
      summary: Get scan interface
      tags:
      - settings
    post:
      consumes:
      - application/json
      description: Configure which network interface to use for scanning.
      parameters:
      - description: Interface to use
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_settings.ScanInterfaceRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Interface configured
          schema:
            $ref: '#/definitions/internal_settings.ScanInterfaceResponse'
        "400":
          description: Invalid request or interface not found
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
      summary: Set scan interface
      tags:
      - settings
  /settings/themes:
    get:
      description: Get all available themes (built-in and custom).
      produces:
      - application/json
      responses:
        "200":
          description: List of themes
          schema:
            items:
              $ref: '#/definitions/internal_settings.ThemeDefinition'
            type: array
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
      summary: List themes
      tags:
      - settings
    post:
      consumes:
      - application/json
      description: Create a new custom theme with CSS token overrides.
      parameters:
      - description: Theme definition (id, created_at, updated_at, version, built_in
          are ignored)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_settings.ThemeDefinition'
      produces:
      - application/json
      responses:
        "201":
          description: Created theme
          schema:
            $ref: '#/definitions/internal_settings.ThemeDefinition'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
      summary: Create theme
      tags:
      - settings
  /settings/themes/{id}:
    delete:
      description: Delete a custom theme. Built-in themes cannot be deleted.
      parameters:
      - description: Theme ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: Theme deleted
        "403":
          description: Cannot delete built-in theme
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
        "404":
          description: Theme not found
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
      summary: Delete theme
      tags:
      - settings
    get:
      description: Get a theme by its ID.
      parameters:
      - description: Theme ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Theme details
          schema:
            $ref: '#/definitions/internal_settings.ThemeDefinition'
        "404":
          description: Theme not found
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
      summary: Get theme
      tags:
      - settings
    put:
      consumes:
      - application/json
      description: Update a custom theme. Built-in themes cannot be modified.
      parameters:
      - description: Theme ID
        in: path
        name: id
        required: true
        type: string
      - description: Fields to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_settings.ThemeDefinition'
      produces:
      - application/json
      responses:
        "200":
          description: Updated theme
          schema:
            $ref: '#/definitions/internal_settings.ThemeDefinition'
        "403":
          description: Cannot modify built-in theme
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
        "404":
          description: Theme not found
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
      summary: Update theme
      tags:
      - settings
  /settings/themes/active:
    get:
      description: Get the ID of the currently active theme.
      produces:
      - application/json
      responses:
        "200":
          description: Active theme ID
          schema:
            $ref: '#/definitions/internal_settings.ActiveThemeResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
      summary: Get active theme
      tags:
      - settings
    put:
      consumes:
      - application/json
      description: Set which theme is currently active.
      parameters:
      - description: Theme ID to activate
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_settings.ActiveThemeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Active theme set
          schema:
            $ref: '#/definitions/internal_settings.ActiveThemeResponse'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
        "404":
          description: Theme not found
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/internal_settings.SettingsProblemDetail'
      summary: Set active theme
      tags:
      - settings
  /users:
    get:
      description: Returns all user accounts. Requires admin role.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_auth.User'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: List users
      tags:
      - users
  /users/{id}:
    delete:
      description: Delete a user account by ID. Requires admin role.
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Delete user
      tags:
      - users
    get:
      description: Returns a single user by ID. Requires admin role.
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_auth.User'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Get user
      tags:
      - users
    put:
      consumes:
      - application/json
      description: Update a user's email, role, or disabled status. Requires admin
        role.
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: Updated user fields
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_auth.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_auth.User'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_HerbHall_subnetree_pkg_models.APIProblem'
      security:
      - BearerAuth: []
      summary: Update user
      tags:
      - users
securityDefinitions:
  BearerAuth:
    description: 'JWT Bearer token. Format: "Bearer {token}"'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
